{% extends "index.html" %}
{% block content %}
    <h1 class="ui header center aligned">{{ stock.name }}</h1>
    <div class="ui divider"></div>
    <h2 class="ui header center aligned">Stock Data</h2>
    <div class="ui divider"></div>
    
        <style>
            .tradingview-widget-container {
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                height: 60vh;
                width: 80vw;
                margin-left: -18vw; 
            }

            @media (max-width: 768px) {
                .tradingview-widget-container {
                    height: 40vh; 
                }
            }
        </style>

        <!-- Trading View Widget -->
        <div class="tradingview-widget-container">
            <div class="tradingview-widget-container__widget"></div>
            <div class="tradingview-widget-copyright">
                <a href="https://www.tradingview.com/" rel="noopener nofollow" target="_blank">Track all markets on TradingView</a>
            </div>
            <script type="text/javascript" src="https://s3.tradingview.com/external-embedding/embed-widget-advanced-chart.js" async>
                {
                    "width": "80vw", 
                    "height": "60vh",
                    "margin": "0 auto", 
                    "symbol": "{{ stock.exchange }}:{{ stock.symbol }}",
                    "interval": "D",
                    "timezone": "America/New_York",
                    "theme": "dark",
                    "style": "1",
                    "locale": "en",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "support_host": "https://www.tradingview.com"
                }
            </script>
        </div>

    <table class="ui selectable inverted table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Open</th>
                <th>High</th>
                <th>Low</th>
                <th>Close</th>
                <th>Volume</th>
            </tr>
        </thead>
        <tbody>
            {% for price in prices %}
                <tr>
                    <td>{{ price.date }}</td>
                    <td>{{ price.open }}</td>
                    <td>{{ price.high }}</td>
                    <td>{{ price.low }}</td>
                    <td>{{ price.close }}</td>
                    <td>{{ price.volume }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

